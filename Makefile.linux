DEBUG = 0

EXECUTABLE = bbb
SOURCES = bbb.c snapshot.c pack.c tools.c
OBJECTS = $(SOURCES:.c=.o)

COMPILER = gcc -c
LINKER = gcc

COMPILER_FLAGS = -DPLATFORM_LINUX
ifeq ($(DEBUG), 1)
	COMPILER_FLAGS += -DDEBUG
endif
LINKER_FLAGS = -lssl -lcrypto

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
	$(LINKER) $(LINKER_FLAGS) $(OBJECTS) -o $@

%.o: %.c
	$(COMPILER) $(COMPILER_FLAGS) $< -o $@

clean:
	rm $(EXECUTABLE) $(OBJECTS)
